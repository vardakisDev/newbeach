{"ast":null,"code":"import cloneDeep from 'lodash/cloneDeep';\nimport qs from 'qs';\nimport isPlainObject from 'lodash/isPlainObject';\nimport { platform, release } from 'os';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar attempts = {};\nvar defaultsByInstance = new Map();\nvar networkErrorAttempts = 0;\n\nfunction rateLimit(instance, defaults) {\n  var maxRetry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n  defaultsByInstance.set(instance, defaults);\n  var instanceDefaults = defaultsByInstance.get(instance);\n  var _instanceDefaults$res = instanceDefaults.responseLogger,\n      responseLogger = _instanceDefaults$res === void 0 ? function () {\n    return undefined;\n  } : _instanceDefaults$res,\n      _instanceDefaults$req = instanceDefaults.requestLogger,\n      requestLogger = _instanceDefaults$req === void 0 ? function () {\n    return undefined;\n  } : _instanceDefaults$req;\n  instance.interceptors.request.use(function (config) {\n    requestLogger(config);\n    return config;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    // we don't need to do anything here\n    responseLogger(response);\n    return response;\n  }, function (error) {\n    var response = error.response,\n        config = error.config; // Do not retry if it is disabled or no request config exists (not an axios error)\n\n    if (!config || !instanceDefaults.retryOnError) {\n      return Promise.reject(error);\n    }\n\n    var retryErrorType = null;\n    var wait = 0; // Errors without response did not recieve anything from the server\n\n    if (!response) {\n      retryErrorType = 'Connection';\n      networkErrorAttempts++;\n\n      if (networkErrorAttempts > maxRetry) {\n        error.attempts = networkErrorAttempts;\n        return Promise.reject(error);\n      }\n\n      wait = Math.pow(Math.SQRT2, networkErrorAttempts);\n      response = {};\n    } else {\n      networkErrorAttempts = 0;\n    }\n\n    if (response.status >= 500 && response.status < 600) {\n      // 5** errors are server related\n      retryErrorType = \"Server \".concat(response.status);\n      var headers = response.headers || {};\n      var requestId = headers['x-contentful-request-id'] || null;\n      attempts[requestId] = attempts[requestId] || 0;\n      attempts[requestId]++; // we reject if there are too many errors with the same request id or request id is not defined\n\n      if (attempts[requestId] > maxRetry || !requestId) {\n        error.attempts = attempts[requestId];\n        return Promise.reject(error);\n      }\n\n      wait = Math.pow(Math.SQRT2, attempts[requestId]);\n    } else if (response.status === 429) {\n      // 429 errors are exceeded rate limit exceptions\n      retryErrorType = 'Rate limit'; // all headers are lowercased by axios https://github.com/mzabriskie/axios/issues/413\n\n      if (response.headers && error.response.headers['x-contentful-ratelimit-reset']) {\n        wait = response.headers['x-contentful-ratelimit-reset'];\n      }\n    }\n\n    var delay = function delay(ms) {\n      return new Promise(function (resolve) {\n        setTimeout(resolve, ms);\n      });\n    };\n\n    if (retryErrorType) {\n      // convert to ms and add jitter\n      wait = Math.floor(wait * 1000 + Math.random() * 200 + 500);\n      instanceDefaults.logHandler('warning', \"\".concat(retryErrorType, \" error occurred. Waiting for \").concat(wait, \" ms before retrying...\"));\n      /* Somehow between the interceptor and retrying the request the httpAgent/httpsAgent gets transformed from an Agent-like object\n         to a regular object, causing failures on retries after rate limits. Removing these properties here fixes the error, but retry\n         requests still use the original http/httpsAgent property */\n\n      delete config.httpAgent;\n      delete config.httpsAgent;\n      return delay(wait).then(function () {\n        return instance(config);\n      });\n    }\n\n    return Promise.reject(error);\n  });\n}\n\nfunction isNode() {\n  /**\n   * Polyfills of 'process' might set process.browser === true\n   *\n   * See:\n   * https://github.com/webpack/node-libs-browser/blob/master/mock/process.js#L8\n   * https://github.com/defunctzombie/node-process/blob/master/browser.js#L156\n  **/\n  return typeof process !== 'undefined' && !process.browser;\n}\n\nfunction getNodeVersion() {\n  return process.versions.node ? \"v\".concat(process.versions.node) : process.version;\n} // Also enforces toplevel domain specified, no spaces and no protocol\n\n\nvar HOST_REGEX = /^(?!\\w+:\\/\\/)([^\\s:]+\\.[^\\s:]+)(?::(\\d+))?(?!:)$/;\n/**\n * Create pre configured axios instance\n * @private\n * @param {Object} axios - Axios library\n * @param {Object} httpClientParams - Initialization parameters for the HTTP client\n * @prop {string} space - Space ID\n * @prop {string} accessToken - Access Token\n * @prop {boolean=} insecure - If we should use http instead\n * @prop {string=} host - Alternate host\n * @prop {Object=} httpAgent - HTTP agent for node\n * @prop {Object=} httpsAgent - HTTPS agent for node\n * @prop {function=} adapter - Axios adapter to handle requests\n * @prop {function=} requestLogger - Gets called on every request triggered by the SDK, takes the axios request config as an argument\n * @prop {function=} responseLogger - Gets called on every response, takes axios response object as an argument\n * @prop {Object=} proxy - Axios proxy config\n * @prop {Object=} headers - Additional headers\n * @prop {function=} logHandler - A log handler function to process given log messages & errors. Receives the log level (error, warning & info) and the actual log data (Error object or string). (Default can be found here: https://github.com/contentful/contentful-sdk-core/blob/master/lib/create-http-client.js)\n * @return {Object} Initialized axios instance\n */\n\nfunction createHttpClient(axios, options) {\n  var defaultConfig = {\n    insecure: false,\n    retryOnError: true,\n    logHandler: function logHandler(level, data) {\n      if (level === 'error' && data) {\n        var title = [data.name, data.message].filter(function (a) {\n          return a;\n        }).join(' - ');\n        console.error(\"[error] \".concat(title));\n        console.error(data);\n        return;\n      }\n\n      console.log(\"[\".concat(level, \"] \").concat(data));\n    },\n    // Passed to axios\n    headers: {},\n    httpAgent: false,\n    httpsAgent: false,\n    timeout: 30000,\n    proxy: false,\n    basePath: '',\n    adapter: false,\n    maxContentLength: 1073741824 // 1GB\n\n  };\n\n  var config = _objectSpread2({}, defaultConfig, {}, options);\n\n  if (!config.accessToken) {\n    var missingAccessTokenError = new TypeError('Expected parameter accessToken');\n    config.logHandler('error', missingAccessTokenError);\n    throw missingAccessTokenError;\n  } // Construct axios baseURL option\n\n\n  var protocol = config.insecure ? 'http' : 'https';\n  var space = config.space ? \"\".concat(config.space, \"/\") : '';\n  var hostname = config.defaultHostname;\n  var port = config.insecure ? 80 : 443;\n\n  if (HOST_REGEX.test(config.host)) {\n    var parsed = config.host.split(':');\n\n    if (parsed.length === 2) {\n      var _parsed = _slicedToArray(parsed, 2);\n\n      hostname = _parsed[0];\n      port = _parsed[1];\n    } else {\n      hostname = parsed[0];\n    }\n  } // Ensure that basePath does start but not end with a slash\n\n\n  if (config.basePath) {\n    config.basePath = \"/\".concat(config.basePath.split('/').filter(Boolean).join('/'));\n  }\n\n  var baseURL = options.baseURL || \"\".concat(protocol, \"://\").concat(hostname, \":\").concat(port).concat(config.basePath, \"/spaces/\").concat(space);\n\n  if (!config.headers['Authorization']) {\n    config.headers['Authorization'] = 'Bearer ' + config.accessToken;\n  } // Set these headers only for node because browsers don't like it when you\n  // override user-agent or accept-encoding.\n  // The SDKs should set their own X-Contentful-User-Agent.\n\n\n  if (isNode()) {\n    config.headers['user-agent'] = 'node.js/' + getNodeVersion();\n    config.headers['Accept-Encoding'] = 'gzip';\n  }\n\n  var axiosOptions = {\n    // Axios\n    baseURL: baseURL,\n    headers: config.headers,\n    httpAgent: config.httpAgent,\n    httpsAgent: config.httpsAgent,\n    paramsSerializer: qs.stringify,\n    proxy: config.proxy,\n    timeout: config.timeout,\n    adapter: config.adapter,\n    maxContentLength: config.maxContentLength,\n    // Contentful\n    logHandler: config.logHandler,\n    responseLogger: config.responseLogger,\n    requestLogger: config.requestLogger,\n    retryOnError: config.retryOnError\n  };\n  var instance = axios.create(axiosOptions);\n  instance.httpClientParams = options;\n  /**\n   * Creates a new axios instance with the same default base parameters as the\n   * current one, and with any overrides passed to the newParams object\n   * This is useful as the SDKs use dependency injection to get the axios library\n   * and the version of the library comes from different places depending\n   * on whether it's a browser build or a node.js build.\n   * @private\n   * @param {Object} httpClientParams - Initialization parameters for the HTTP client\n   * @return {Object} Initialized axios instance\n   */\n\n  instance.cloneWithNewParams = function (newParams) {\n    return createHttpClient(axios, _objectSpread2({}, cloneDeep(options), {}, newParams));\n  };\n\n  rateLimit(instance, axiosOptions, config.retryLimit);\n  return instance;\n}\n/**\n * Creates request parameters configuration by parsing an existing query object\n * @private\n * @param {Object} query\n * @return {Object} Config object with `params` property, ready to be used in axios\n */\n\n\nfunction createRequestConfig(_ref) {\n  var query = _ref.query;\n  var config = {};\n  delete query.resolveLinks;\n  config.params = cloneDeep(query);\n  return config;\n}\n\nfunction enforceObjPath(obj, path) {\n  if (!(path in obj)) {\n    var err = new Error();\n    err.name = 'PropertyMissing';\n    err.message = \"Required property \".concat(path, \" missing from:\\n\\n\").concat(JSON.stringify(obj), \"\\n\\n\");\n    throw err;\n  }\n\n  return true;\n}\n\nfunction freezeObjectDeep(obj) {\n  Object.keys(obj).forEach(function (key) {\n    var value = obj[key];\n\n    if (isPlainObject(value)) {\n      freezeObjectDeep(value);\n    }\n  });\n  return Object.freeze(obj);\n}\n\nfunction freezeSys(obj) {\n  freezeObjectDeep(obj.sys || {});\n  return obj;\n}\n\nfunction isReactNative() {\n  return typeof window !== 'undefined' && 'navigator' in window && 'product' in window.navigator && window.navigator.product === 'ReactNative';\n}\n\nfunction getBrowserOS() {\n  if (!window) {\n    return null;\n  }\n\n  var userAgent = window.navigator.userAgent;\n  var platform = window.navigator.platform;\n  var macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  var windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  var iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  var os = null;\n\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    os = 'macOS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    os = 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    os = 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    os = 'Android';\n  } else if (/Linux/.test(platform)) {\n    os = 'Linux';\n  }\n\n  return os;\n}\n\nfunction getNodeOS() {\n  var os = platform() || 'linux';\n  var version = release() || '0.0.0';\n  var osMap = {\n    android: 'Android',\n    aix: 'Linux',\n    darwin: 'macOS',\n    freebsd: 'Linux',\n    linux: 'Linux',\n    openbsd: 'Linux',\n    sunos: 'Linux',\n    win32: 'Windows'\n  };\n\n  if (os in osMap) {\n    return \"\".concat(osMap[os] || 'Linux', \"/\").concat(version);\n  }\n\n  return null;\n}\n\nfunction getUserAgentHeader(sdk, application, integration, feature) {\n  var headerParts = [];\n\n  if (application) {\n    headerParts.push(\"app \".concat(application));\n  }\n\n  if (integration) {\n    headerParts.push(\"integration \".concat(integration));\n  }\n\n  if (feature) {\n    headerParts.push('feature ' + feature);\n  }\n\n  headerParts.push(\"sdk \".concat(sdk));\n  var os = null;\n\n  try {\n    if (isReactNative()) {\n      os = getBrowserOS();\n      headerParts.push('platform ReactNative');\n    } else if (isNode()) {\n      os = getNodeOS();\n      headerParts.push(\"platform node.js/\".concat(getNodeVersion()));\n    } else {\n      os = getBrowserOS();\n      headerParts.push(\"platform browser\");\n    }\n  } catch (e) {\n    os = null;\n  }\n\n  if (os) {\n    headerParts.push(\"os \".concat(os));\n  }\n\n  return \"\".concat(headerParts.filter(function (item) {\n    return item !== '';\n  }).join('; '), \";\");\n}\n/**\n * Mixes in a method to return just a plain object with no additional methods\n * @private\n * @param {Object} data - Any plain JSON response returned from the API\n * @return {Object} Enhanced object with toPlainObject method\n */\n\n\nfunction toPlainObject(data) {\n  return Object.defineProperty(data, 'toPlainObject', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function value() {\n      return cloneDeep(this);\n    }\n  });\n}\n\nexport { createHttpClient, createRequestConfig, enforceObjPath, freezeSys, getUserAgentHeader, toPlainObject };","map":{"version":3,"sources":["C:/Users/στελης/Desktop/Hotel React/resort/node_modules/contentful-sdk-core/dist/index.es-modules.js"],"names":["cloneDeep","qs","isPlainObject","platform","release","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Array","isArray","Symbol","iterator","prototype","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","err","TypeError","attempts","defaultsByInstance","Map","networkErrorAttempts","rateLimit","instance","defaults","maxRetry","set","instanceDefaults","get","_instanceDefaults$res","responseLogger","_instanceDefaults$req","requestLogger","interceptors","request","use","config","error","Promise","reject","response","retryOnError","retryErrorType","wait","Math","pow","SQRT2","status","concat","headers","requestId","delay","ms","resolve","setTimeout","floor","random","logHandler","httpAgent","httpsAgent","then","isNode","process","browser","getNodeVersion","versions","node","version","HOST_REGEX","createHttpClient","axios","options","defaultConfig","insecure","level","data","title","name","message","a","join","console","log","timeout","proxy","basePath","adapter","maxContentLength","accessToken","missingAccessTokenError","protocol","space","hostname","defaultHostname","port","test","host","parsed","split","_parsed","Boolean","baseURL","axiosOptions","paramsSerializer","stringify","create","httpClientParams","cloneWithNewParams","newParams","retryLimit","createRequestConfig","_ref","query","resolveLinks","params","enforceObjPath","path","Error","JSON","freezeObjectDeep","freeze","freezeSys","sys","isReactNative","window","navigator","product","getBrowserOS","userAgent","macosPlatforms","windowsPlatforms","iosPlatforms","os","indexOf","getNodeOS","osMap","android","aix","darwin","freebsd","linux","openbsd","sunos","win32","getUserAgentHeader","sdk","application","integration","feature","headerParts","e","item","toPlainObject"],"mappings":"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","sourcesContent":["import cloneDeep from 'lodash/cloneDeep';\nimport qs from 'qs';\nimport isPlainObject from 'lodash/isPlainObject';\nimport { platform, release } from 'os';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar attempts = {};\nvar defaultsByInstance = new Map();\nvar networkErrorAttempts = 0;\nfunction rateLimit(instance, defaults) {\n  var maxRetry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n  defaultsByInstance.set(instance, defaults);\n  var instanceDefaults = defaultsByInstance.get(instance);\n  var _instanceDefaults$res = instanceDefaults.responseLogger,\n      responseLogger = _instanceDefaults$res === void 0 ? function () {\n    return undefined;\n  } : _instanceDefaults$res,\n      _instanceDefaults$req = instanceDefaults.requestLogger,\n      requestLogger = _instanceDefaults$req === void 0 ? function () {\n    return undefined;\n  } : _instanceDefaults$req;\n  instance.interceptors.request.use(function (config) {\n    requestLogger(config);\n    return config;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    // we don't need to do anything here\n    responseLogger(response);\n    return response;\n  }, function (error) {\n    var response = error.response,\n        config = error.config; // Do not retry if it is disabled or no request config exists (not an axios error)\n\n    if (!config || !instanceDefaults.retryOnError) {\n      return Promise.reject(error);\n    }\n\n    var retryErrorType = null;\n    var wait = 0; // Errors without response did not recieve anything from the server\n\n    if (!response) {\n      retryErrorType = 'Connection';\n      networkErrorAttempts++;\n\n      if (networkErrorAttempts > maxRetry) {\n        error.attempts = networkErrorAttempts;\n        return Promise.reject(error);\n      }\n\n      wait = Math.pow(Math.SQRT2, networkErrorAttempts);\n      response = {};\n    } else {\n      networkErrorAttempts = 0;\n    }\n\n    if (response.status >= 500 && response.status < 600) {\n      // 5** errors are server related\n      retryErrorType = \"Server \".concat(response.status);\n      var headers = response.headers || {};\n      var requestId = headers['x-contentful-request-id'] || null;\n      attempts[requestId] = attempts[requestId] || 0;\n      attempts[requestId]++; // we reject if there are too many errors with the same request id or request id is not defined\n\n      if (attempts[requestId] > maxRetry || !requestId) {\n        error.attempts = attempts[requestId];\n        return Promise.reject(error);\n      }\n\n      wait = Math.pow(Math.SQRT2, attempts[requestId]);\n    } else if (response.status === 429) {\n      // 429 errors are exceeded rate limit exceptions\n      retryErrorType = 'Rate limit'; // all headers are lowercased by axios https://github.com/mzabriskie/axios/issues/413\n\n      if (response.headers && error.response.headers['x-contentful-ratelimit-reset']) {\n        wait = response.headers['x-contentful-ratelimit-reset'];\n      }\n    }\n\n    var delay = function delay(ms) {\n      return new Promise(function (resolve) {\n        setTimeout(resolve, ms);\n      });\n    };\n\n    if (retryErrorType) {\n      // convert to ms and add jitter\n      wait = Math.floor(wait * 1000 + Math.random() * 200 + 500);\n      instanceDefaults.logHandler('warning', \"\".concat(retryErrorType, \" error occurred. Waiting for \").concat(wait, \" ms before retrying...\"));\n      /* Somehow between the interceptor and retrying the request the httpAgent/httpsAgent gets transformed from an Agent-like object\n         to a regular object, causing failures on retries after rate limits. Removing these properties here fixes the error, but retry\n         requests still use the original http/httpsAgent property */\n\n      delete config.httpAgent;\n      delete config.httpsAgent;\n      return delay(wait).then(function () {\n        return instance(config);\n      });\n    }\n\n    return Promise.reject(error);\n  });\n}\n\nfunction isNode() {\n  /**\n   * Polyfills of 'process' might set process.browser === true\n   *\n   * See:\n   * https://github.com/webpack/node-libs-browser/blob/master/mock/process.js#L8\n   * https://github.com/defunctzombie/node-process/blob/master/browser.js#L156\n  **/\n  return typeof process !== 'undefined' && !process.browser;\n}\nfunction getNodeVersion() {\n  return process.versions.node ? \"v\".concat(process.versions.node) : process.version;\n}\n\n// Also enforces toplevel domain specified, no spaces and no protocol\n\nvar HOST_REGEX = /^(?!\\w+:\\/\\/)([^\\s:]+\\.[^\\s:]+)(?::(\\d+))?(?!:)$/;\n/**\n * Create pre configured axios instance\n * @private\n * @param {Object} axios - Axios library\n * @param {Object} httpClientParams - Initialization parameters for the HTTP client\n * @prop {string} space - Space ID\n * @prop {string} accessToken - Access Token\n * @prop {boolean=} insecure - If we should use http instead\n * @prop {string=} host - Alternate host\n * @prop {Object=} httpAgent - HTTP agent for node\n * @prop {Object=} httpsAgent - HTTPS agent for node\n * @prop {function=} adapter - Axios adapter to handle requests\n * @prop {function=} requestLogger - Gets called on every request triggered by the SDK, takes the axios request config as an argument\n * @prop {function=} responseLogger - Gets called on every response, takes axios response object as an argument\n * @prop {Object=} proxy - Axios proxy config\n * @prop {Object=} headers - Additional headers\n * @prop {function=} logHandler - A log handler function to process given log messages & errors. Receives the log level (error, warning & info) and the actual log data (Error object or string). (Default can be found here: https://github.com/contentful/contentful-sdk-core/blob/master/lib/create-http-client.js)\n * @return {Object} Initialized axios instance\n */\n\nfunction createHttpClient(axios, options) {\n  var defaultConfig = {\n    insecure: false,\n    retryOnError: true,\n    logHandler: function logHandler(level, data) {\n      if (level === 'error' && data) {\n        var title = [data.name, data.message].filter(function (a) {\n          return a;\n        }).join(' - ');\n        console.error(\"[error] \".concat(title));\n        console.error(data);\n        return;\n      }\n\n      console.log(\"[\".concat(level, \"] \").concat(data));\n    },\n    // Passed to axios\n    headers: {},\n    httpAgent: false,\n    httpsAgent: false,\n    timeout: 30000,\n    proxy: false,\n    basePath: '',\n    adapter: false,\n    maxContentLength: 1073741824 // 1GB\n\n  };\n\n  var config = _objectSpread2({}, defaultConfig, {}, options);\n\n  if (!config.accessToken) {\n    var missingAccessTokenError = new TypeError('Expected parameter accessToken');\n    config.logHandler('error', missingAccessTokenError);\n    throw missingAccessTokenError;\n  } // Construct axios baseURL option\n\n\n  var protocol = config.insecure ? 'http' : 'https';\n  var space = config.space ? \"\".concat(config.space, \"/\") : '';\n  var hostname = config.defaultHostname;\n  var port = config.insecure ? 80 : 443;\n\n  if (HOST_REGEX.test(config.host)) {\n    var parsed = config.host.split(':');\n\n    if (parsed.length === 2) {\n      var _parsed = _slicedToArray(parsed, 2);\n\n      hostname = _parsed[0];\n      port = _parsed[1];\n    } else {\n      hostname = parsed[0];\n    }\n  } // Ensure that basePath does start but not end with a slash\n\n\n  if (config.basePath) {\n    config.basePath = \"/\".concat(config.basePath.split('/').filter(Boolean).join('/'));\n  }\n\n  var baseURL = options.baseURL || \"\".concat(protocol, \"://\").concat(hostname, \":\").concat(port).concat(config.basePath, \"/spaces/\").concat(space);\n\n  if (!config.headers['Authorization']) {\n    config.headers['Authorization'] = 'Bearer ' + config.accessToken;\n  } // Set these headers only for node because browsers don't like it when you\n  // override user-agent or accept-encoding.\n  // The SDKs should set their own X-Contentful-User-Agent.\n\n\n  if (isNode()) {\n    config.headers['user-agent'] = 'node.js/' + getNodeVersion();\n    config.headers['Accept-Encoding'] = 'gzip';\n  }\n\n  var axiosOptions = {\n    // Axios\n    baseURL: baseURL,\n    headers: config.headers,\n    httpAgent: config.httpAgent,\n    httpsAgent: config.httpsAgent,\n    paramsSerializer: qs.stringify,\n    proxy: config.proxy,\n    timeout: config.timeout,\n    adapter: config.adapter,\n    maxContentLength: config.maxContentLength,\n    // Contentful\n    logHandler: config.logHandler,\n    responseLogger: config.responseLogger,\n    requestLogger: config.requestLogger,\n    retryOnError: config.retryOnError\n  };\n  var instance = axios.create(axiosOptions);\n  instance.httpClientParams = options;\n  /**\n   * Creates a new axios instance with the same default base parameters as the\n   * current one, and with any overrides passed to the newParams object\n   * This is useful as the SDKs use dependency injection to get the axios library\n   * and the version of the library comes from different places depending\n   * on whether it's a browser build or a node.js build.\n   * @private\n   * @param {Object} httpClientParams - Initialization parameters for the HTTP client\n   * @return {Object} Initialized axios instance\n   */\n\n  instance.cloneWithNewParams = function (newParams) {\n    return createHttpClient(axios, _objectSpread2({}, cloneDeep(options), {}, newParams));\n  };\n\n  rateLimit(instance, axiosOptions, config.retryLimit);\n  return instance;\n}\n\n/**\n * Creates request parameters configuration by parsing an existing query object\n * @private\n * @param {Object} query\n * @return {Object} Config object with `params` property, ready to be used in axios\n */\n\nfunction createRequestConfig(_ref) {\n  var query = _ref.query;\n  var config = {};\n  delete query.resolveLinks;\n  config.params = cloneDeep(query);\n  return config;\n}\n\nfunction enforceObjPath(obj, path) {\n  if (!(path in obj)) {\n    var err = new Error();\n    err.name = 'PropertyMissing';\n    err.message = \"Required property \".concat(path, \" missing from:\\n\\n\").concat(JSON.stringify(obj), \"\\n\\n\");\n    throw err;\n  }\n\n  return true;\n}\n\nfunction freezeObjectDeep(obj) {\n  Object.keys(obj).forEach(function (key) {\n    var value = obj[key];\n\n    if (isPlainObject(value)) {\n      freezeObjectDeep(value);\n    }\n  });\n  return Object.freeze(obj);\n}\n\nfunction freezeSys(obj) {\n  freezeObjectDeep(obj.sys || {});\n  return obj;\n}\n\nfunction isReactNative() {\n  return typeof window !== 'undefined' && 'navigator' in window && 'product' in window.navigator && window.navigator.product === 'ReactNative';\n}\n\nfunction getBrowserOS() {\n  if (!window) {\n    return null;\n  }\n\n  var userAgent = window.navigator.userAgent;\n  var platform = window.navigator.platform;\n  var macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  var windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  var iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  var os = null;\n\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    os = 'macOS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    os = 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    os = 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    os = 'Android';\n  } else if (/Linux/.test(platform)) {\n    os = 'Linux';\n  }\n\n  return os;\n}\n\nfunction getNodeOS() {\n  var os = platform() || 'linux';\n  var version = release() || '0.0.0';\n  var osMap = {\n    android: 'Android',\n    aix: 'Linux',\n    darwin: 'macOS',\n    freebsd: 'Linux',\n    linux: 'Linux',\n    openbsd: 'Linux',\n    sunos: 'Linux',\n    win32: 'Windows'\n  };\n\n  if (os in osMap) {\n    return \"\".concat(osMap[os] || 'Linux', \"/\").concat(version);\n  }\n\n  return null;\n}\n\nfunction getUserAgentHeader(sdk, application, integration, feature) {\n  var headerParts = [];\n\n  if (application) {\n    headerParts.push(\"app \".concat(application));\n  }\n\n  if (integration) {\n    headerParts.push(\"integration \".concat(integration));\n  }\n\n  if (feature) {\n    headerParts.push('feature ' + feature);\n  }\n\n  headerParts.push(\"sdk \".concat(sdk));\n  var os = null;\n\n  try {\n    if (isReactNative()) {\n      os = getBrowserOS();\n      headerParts.push('platform ReactNative');\n    } else if (isNode()) {\n      os = getNodeOS();\n      headerParts.push(\"platform node.js/\".concat(getNodeVersion()));\n    } else {\n      os = getBrowserOS();\n      headerParts.push(\"platform browser\");\n    }\n  } catch (e) {\n    os = null;\n  }\n\n  if (os) {\n    headerParts.push(\"os \".concat(os));\n  }\n\n  return \"\".concat(headerParts.filter(function (item) {\n    return item !== '';\n  }).join('; '), \";\");\n}\n\n/**\n * Mixes in a method to return just a plain object with no additional methods\n * @private\n * @param {Object} data - Any plain JSON response returned from the API\n * @return {Object} Enhanced object with toPlainObject method\n */\n\nfunction toPlainObject(data) {\n  return Object.defineProperty(data, 'toPlainObject', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function value() {\n      return cloneDeep(this);\n    }\n  });\n}\n\nexport { createHttpClient, createRequestConfig, enforceObjPath, freezeSys, getUserAgentHeader, toPlainObject };\n"]},"metadata":{},"sourceType":"module"}